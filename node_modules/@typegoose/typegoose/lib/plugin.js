"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const data_1 = require("./internal/data");
const utils_1 = require("./internal/utils");
/**
 * Add a Middleware-Plugin
 * @param mongoosePlugin The Plugin to plug-in
 * @param options Options for the Plugin, if any
 */
function plugin(mongoosePlugin, options) {
    return (target) => {
        const name = utils_1.getName(target);
        options = typeof options !== 'object' ? {} : options; // ensure it is an object, even if empty
        /* istanbul ignore else */
        if (!data_1.plugins.has(name)) {
            data_1.plugins.set(name, []);
        }
        data_1.plugins.get(name).push({ mongoosePlugin, options });
    };
}
exports.plugin = plugin;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1Z2luLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3BsdWdpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDBDQUEwQztBQUMxQyw0Q0FBMkM7QUFHM0M7Ozs7R0FJRztBQUNILFNBQWdCLE1BQU0sQ0FBQyxjQUFvQixFQUFFLE9BQWE7SUFDeEQsT0FBTyxDQUFDLE1BQVcsRUFBRSxFQUFFO1FBQ3JCLE1BQU0sSUFBSSxHQUFXLGVBQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVyQyxPQUFPLEdBQUcsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLHdDQUF3QztRQUU5RiwwQkFBMEI7UUFDMUIsSUFBSSxDQUFDLGNBQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEIsY0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDdkI7UUFDRCxjQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLGNBQWMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELENBQUMsQ0FBQztBQUNKLENBQUM7QUFaRCx3QkFZQyJ9